

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>imgutils.detect.similarity &mdash; imgutils 0.9.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=c9d0a6ec" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=8841c456"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="imgutils.detect.text" href="text.html" />
    <link rel="prev" title="imgutils.detect.person" href="person.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            imgutils
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/quick_start/index.html">Quick Start</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../information/environment.result.html">Run Environment Information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">imgutils.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ascii/index.html">imgutils.ascii</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">imgutils.data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">imgutils.detect</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="booru_yolo.html">imgutils.detect.booru_yolo</a></li>
<li class="toctree-l2"><a class="reference internal" href="censor.html">imgutils.detect.censor</a></li>
<li class="toctree-l2"><a class="reference internal" href="eye.html">imgutils.detect.eye</a></li>
<li class="toctree-l2"><a class="reference internal" href="face.html">imgutils.detect.face</a></li>
<li class="toctree-l2"><a class="reference internal" href="halfbody.html">imgutils.detect.halfbody</a></li>
<li class="toctree-l2"><a class="reference internal" href="hand.html">imgutils.detect.hand</a></li>
<li class="toctree-l2"><a class="reference internal" href="head.html">imgutils.detect.head</a></li>
<li class="toctree-l2"><a class="reference internal" href="nudenet.html">imgutils.detect.nudenet</a></li>
<li class="toctree-l2"><a class="reference internal" href="person.html">imgutils.detect.person</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">imgutils.detect.similarity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#calculate-iou">calculate_iou</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#imgutils.detect.similarity.calculate_iou"><code class="docutils literal notranslate"><span class="pre">calculate_iou()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bboxes-similarity">bboxes_similarity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#imgutils.detect.similarity.bboxes_similarity"><code class="docutils literal notranslate"><span class="pre">bboxes_similarity()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#detection-similarity">detection_similarity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#imgutils.detect.similarity.detection_similarity"><code class="docutils literal notranslate"><span class="pre">detection_similarity()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="text.html">imgutils.detect.text</a></li>
<li class="toctree-l2"><a class="reference internal" href="visual.html">imgutils.detect.visual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../edge/index.html">imgutils.edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generic/index.html">imgutils.generic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata/index.html">imgutils.metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">imgutils.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocr/index.html">imgutils.ocr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operate/index.html">imgutils.operate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pose/index.html">imgutils.pose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preprocess/index.html">imgutils.preprocess</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resource/index.html">imgutils.resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restore/index.html">imgutils.restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sd/index.html">imgutils.sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../segment/index.html">imgutils.segment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tagging/index.html">imgutils.tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upscale/index.html">imgutils.upscale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">imgutils.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validate/index.html">imgutils.validate</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">imgutils</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">imgutils.detect</a></li>
      <li class="breadcrumb-item active">imgutils.detect.similarity</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api_doc/detect/similarity.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
    
    
  <section id="module-imgutils.detect.similarity">
<span id="imgutils-detect-similarity"></span><h1>imgutils.detect.similarity<a class="headerlink" href="#module-imgutils.detect.similarity" title="Permalink to this heading"></a></h1>
<p>This module provides functions for calculating similarities between bounding boxes and detections.</p>
<p>It includes functions to calculate Intersection over Union (IoU) for individual bounding boxes,
compute similarities between lists of bounding boxes, and compare detections with labels.
The module is designed to work with various types of bounding box representations and
offers different modes for aggregating similarity scores.</p>
<p>Key components:</p>
<ul class="simple">
<li><p>calculate_iou: Computes IoU between two bounding boxes</p></li>
<li><p>bboxes_similarity: Calculates similarities between two lists of bounding boxes</p></li>
<li><p>detection_similarity: Compares two lists of detections, considering both bounding boxes and labels</p></li>
</ul>
<p>This module is particularly useful for tasks involving object detection, 
image segmentation, and evaluation of detection algorithms.</p>
<section id="calculate-iou">
<h2>calculate_iou<a class="headerlink" href="#calculate-iou" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="imgutils.detect.similarity.calculate_iou">
<span class="sig-prename descclassname"><span class="pre">imgutils.detect.similarity.</span></span><span class="sig-name descname"><span class="pre">calculate_iou</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="../../_modules/imgutils/detect/similarity.html#calculate_iou"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.detect.similarity.calculate_iou" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the Intersection over Union (IoU) between two bounding boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box1</strong> (<em>BBoxTyping</em>) – The first bounding box, represented as (x1, y1, x2, y2).</p></li>
<li><p><strong>box2</strong> (<em>BBoxTyping</em>) – The second bounding box, represented as (x1, y1, x2, y2).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The IoU value between the two bounding boxes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p>This function computes the IoU, which is a measure of the overlap between two bounding boxes.
The IoU is calculated as the area of intersection divided by the area of union of the two boxes.</p>
<dl>
<dt>Example::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">box1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">box2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iou</span> <span class="o">=</span> <span class="n">calculate_iou</span><span class="p">(</span><span class="n">box1</span><span class="p">,</span> <span class="n">box2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IoU: </span><span class="si">{</span><span class="n">iou</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">IoU: 0.1429</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="bboxes-similarity">
<h2>bboxes_similarity<a class="headerlink" href="#bboxes-similarity" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="imgutils.detect.similarity.bboxes_similarity">
<span class="sig-prename descclassname"><span class="pre">imgutils.detect.similarity.</span></span><span class="sig-name descname"><span class="pre">bboxes_similarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'max'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'mean'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'raw'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/imgutils/detect/similarity.html#bboxes_similarity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.detect.similarity.bboxes_similarity" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the similarity between two lists of bounding boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bboxes1</strong> (<em>List</em><em>[</em><em>BBoxTyping</em><em>]</em>) – First list of bounding boxes.</p></li>
<li><p><strong>bboxes2</strong> (<em>List</em><em>[</em><em>BBoxTyping</em><em>]</em>) – Second list of bounding boxes.</p></li>
<li><p><strong>mode</strong> (<em>Literal</em><em>[</em><em>'max'</em><em>, </em><em>'mean'</em><em>, </em><em>'raw'</em><em>]</em>) – The mode for calculating similarity. Options are ‘max’, ‘mean’, or ‘raw’. Defaults to ‘mean’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The similarity score or list of scores, depending on the mode.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[float, List[float]]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the lengths of bboxes1 and bboxes2 do not match, or if an unknown mode is specified.</p>
</dd>
</dl>
<p>This function computes the similarity between two lists of bounding boxes using the Hungarian algorithm
to find the optimal assignment. It then returns the similarity based on the specified mode:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code>: Returns the maximum IoU among all matched pairs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: Returns the average IoU of all matched pairs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raw</span></code>: Returns a list of IoU values for all matched pairs.</p></li>
</ul>
<dl>
<dt>Example::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bboxes1</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bboxes2</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similarity</span> <span class="o">=</span> <span class="n">bboxes_similarity</span><span class="p">(</span><span class="n">bboxes1</span><span class="p">,</span> <span class="n">bboxes2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean similarity: </span><span class="si">{</span><span class="n">similarity</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Mean similarity: 0.1429</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="detection-similarity">
<h2>detection_similarity<a class="headerlink" href="#detection-similarity" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="imgutils.detect.similarity.detection_similarity">
<span class="sig-prename descclassname"><span class="pre">imgutils.detect.similarity.</span></span><span class="sig-name descname"><span class="pre">detection_similarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detect1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detect2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'max'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'mean'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'raw'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/imgutils/detect/similarity.html#detection_similarity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.detect.similarity.detection_similarity" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the similarity between two lists of detections, considering both bounding boxes and labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>detect1</strong> (<em>List</em><em>[</em><em>BBoxWithScoreAndLabel</em><em>]</em>) – First list of detections, each containing a bounding box, label, and score.</p></li>
<li><p><strong>detect2</strong> (<em>List</em><em>[</em><em>BBoxWithScoreAndLabel</em><em>]</em>) – Second list of detections, each containing a bounding box, label, and score.</p></li>
<li><p><strong>mode</strong> (<em>Literal</em><em>[</em><em>'max'</em><em>, </em><em>'mean'</em><em>, </em><em>'raw'</em><em>]</em>) – The mode for calculating similarity. Options are ‘max’, ‘mean’, or ‘raw’. Defaults to ‘mean’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The similarity score or list of scores, depending on the mode.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[float, List[float]]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the number of bounding boxes for any label doesn’t match between detect1 and detect2,
or if an unknown mode is specified.</p>
</dd>
</dl>
<p>This function compares two lists of detections by:</p>
<ol class="arabic simple">
<li><p>Grouping detections by their labels.</p></li>
<li><p>For each label, calculating the similarity between the corresponding bounding boxes.</p></li>
<li><p>Aggregating the similarities based on the specified mode.</p></li>
</ol>
<p>The function ensures that for each label, the number of bounding boxes matches between detect1 and detect2.</p>
<dl>
<dt>Example::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">detect1</span> <span class="o">=</span> <span class="p">[((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detect2</span> <span class="o">=</span> <span class="p">[((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">),</span> <span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">similarity</span> <span class="o">=</span> <span class="n">detection_similarity</span><span class="p">(</span><span class="n">detect1</span><span class="p">,</span> <span class="n">detect2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean detection similarity: </span><span class="si">{</span><span class="n">similarity</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Mean detection similarity: 0.1429</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="person.html" class="btn btn-neutral float-left" title="imgutils.detect.person" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="text.html" class="btn btn-neutral float-right" title="imgutils.detect.text" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, narugo1992, 7eu7d7.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v0.9.2
    <span class="fa fa-caret-down"></span>
  </span>
        <div class="rst-other-versions">
                <dl>
                    <dt>Tags</dt>
                        <dd><a href="../../../v0.7.0/api_doc/detect/similarity.html">v0.7.0</a></dd>
                        <dd><a href="../../../v0.7.1/api_doc/detect/similarity.html">v0.7.1</a></dd>
                        <dd><a href="../../../v0.8.0/api_doc/detect/similarity.html">v0.8.0</a></dd>
                        <dd><a href="../../../v0.9.0/api_doc/detect/similarity.html">v0.9.0</a></dd>
                        <dd><a href="../../../v0.9.1/api_doc/detect/similarity.html">v0.9.1</a></dd>
                        <dd><a href="similarity.html">v0.9.2</a></dd>
                        <dd><a href="../../../v0.9.3/api_doc/detect/similarity.html">v0.9.3</a></dd>
                        <dd><a href="../../../v0.9.4/api_doc/detect/similarity.html">v0.9.4</a></dd>
                </dl>
                <dl>
                    <dt>Branches</dt>
                        <dd><a href="../../../main/api_doc/detect/similarity.html">main</a></dd>
                        <dd><a href="../../../HEAD/api_doc/detect/similarity.html">HEAD</a></dd>
                        <dd><a href="../../../dev/denormalize/api_doc/detect/similarity.html">dev/denormalize</a></dd>
                        <dd><a href="../../../dev/transformers/api_doc/detect/similarity.html">dev/transformers</a></dd>
                </dl>
        </div>
    </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>