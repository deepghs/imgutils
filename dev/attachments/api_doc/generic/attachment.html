

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>imgutils.generic.attachment &mdash; imgutils 0.14.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=c9d0a6ec" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=421f3d0b"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="imgutils.generic.classify" href="classify.html" />
    <link rel="prev" title="imgutils.generic" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            imgutils
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/quick_start/index.html">Quick Start</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../information/environment.result.html">Run Environment Information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">imgutils.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ascii/index.html">imgutils.ascii</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">imgutils.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detect/index.html">imgutils.detect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../edge/index.html">imgutils.edge</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">imgutils.generic</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">imgutils.generic.attachment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#attachment">Attachment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#imgutils.generic.attachment.Attachment"><code class="docutils literal notranslate"><span class="pre">Attachment</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#open-attachment">open_attachment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#imgutils.generic.attachment.open_attachment"><code class="docutils literal notranslate"><span class="pre">open_attachment()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="classify.html">imgutils.generic.classify</a></li>
<li class="toctree-l2"><a class="reference internal" href="enhance.html">imgutils.generic.enhance</a></li>
<li class="toctree-l2"><a class="reference internal" href="clip.html">imgutils.generic.clip</a></li>
<li class="toctree-l2"><a class="reference internal" href="siglip.html">imgutils.generic.siglip</a></li>
<li class="toctree-l2"><a class="reference internal" href="yolo.html">imgutils.generic.yolo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metadata/index.html">imgutils.metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">imgutils.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocr/index.html">imgutils.ocr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operate/index.html">imgutils.operate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pose/index.html">imgutils.pose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preprocess/index.html">imgutils.preprocess</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resource/index.html">imgutils.resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restore/index.html">imgutils.restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sd/index.html">imgutils.sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../segment/index.html">imgutils.segment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tagging/index.html">imgutils.tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upscale/index.html">imgutils.upscale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">imgutils.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validate/index.html">imgutils.validate</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">imgutils</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">imgutils.generic</a></li>
      <li class="breadcrumb-item active">imgutils.generic.attachment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api_doc/generic/attachment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
    
    
  <section id="module-imgutils.generic.attachment">
<span id="imgutils-generic-attachment"></span><h1>imgutils.generic.attachment<a class="headerlink" href="#module-imgutils.generic.attachment" title="Permalink to this heading"></a></h1>
<p>This module provides functionality for handling attachments in machine learning models,
particularly those hosted on Hugging Face’s model hub. It includes tools for loading,
managing and making predictions with ONNX models for classification, tagging and regression tasks.</p>
<p>The module provides a caching mechanism for model loading and thread-safe operations
for concurrent access to models and their metadata.</p>
<p>An example of attachment models is <a class="reference external" href="https://huggingface.co/deepghs/eattach_monochrome_experiments">deepghs/eattach_monochrome_experiments</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to train a custom attachment model for taggers,
take a look at our framework <a class="reference external" href="https://github.com/deepghs/emb_attachments">deepghs/emb_attachments</a>.</p>
</div>
<section id="attachment">
<h2>Attachment<a class="headerlink" href="#attachment" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="imgutils.generic.attachment.Attachment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">imgutils.generic.attachment.</span></span><span class="sig-name descname"><span class="pre">Attachment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/imgutils/generic/attachment.html#Attachment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.generic.attachment.Attachment" title="Permalink to this definition"></a></dt>
<dd><p>A class to manage machine learning model attachments from Hugging Face.</p>
<p>This class handles model loading, caching, and prediction for various types of problems
including classification, tagging, and regression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo_id</strong> (<em>str</em>) – The Hugging Face repository ID</p></li>
<li><p><strong>model_name</strong> (<em>str</em>) – Name of the model</p></li>
<li><p><strong>hf_token</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional Hugging Face authentication token</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="imgutils.generic.attachment.Attachment.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/imgutils/generic/attachment.html#Attachment.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.generic.attachment.Attachment.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize the Attachment instance with repository and model information.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="imgutils.generic.attachment.Attachment.encoder_model">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">encoder_model</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#imgutils.generic.attachment.Attachment.encoder_model" title="Permalink to this definition"></a></dt>
<dd><p>Get the encoder model name from metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Name of the encoder model</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="imgutils.generic.attachment.Attachment.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/imgutils/generic/attachment.html#Attachment.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.generic.attachment.Attachment.predict" title="Permalink to this definition"></a></dt>
<dd><p>Make predictions based on the problem type (classification, tagging, or regression).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>np.ndarray</em>) – Input embedding array</p></li>
<li><p><strong>kwargs</strong> – Additional arguments passed to specific prediction methods</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Prediction results in specified format</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If embedding shape is invalid or problem type is unknown</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="open-attachment">
<h2>open_attachment<a class="headerlink" href="#open-attachment" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="imgutils.generic.attachment.open_attachment">
<span class="sig-prename descclassname"><span class="pre">imgutils.generic.attachment.</span></span><span class="sig-name descname"><span class="pre">open_attachment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#imgutils.generic.attachment.Attachment" title="imgutils.generic.attachment.Attachment"><span class="pre">Attachment</span></a></span></span><a class="reference internal" href="../../_modules/imgutils/generic/attachment.html#open_attachment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#imgutils.generic.attachment.open_attachment" title="Permalink to this definition"></a></dt>
<dd><p>Create and cache an Attachment instance.</p>
<p>This function creates a new Attachment instance or returns a cached one
if it was previously created with the same parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo_id</strong> (<em>str</em>) – The Hugging Face repository ID</p></li>
<li><p><strong>model_name</strong> (<em>str</em>) – Name of the model</p></li>
<li><p><strong>hf_token</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional Hugging Face authentication token</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An Attachment instance</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#imgutils.generic.attachment.Attachment" title="imgutils.generic.attachment.Attachment">Attachment</a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="imgutils.generic" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="classify.html" class="btn btn-neutral float-right" title="imgutils.generic.classify" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, narugo1992, 7eu7d7.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: dev/attachments
    <span class="fa fa-caret-down"></span>
  </span>
        <div class="rst-other-versions">
                <dl>
                    <dt>Tags</dt>
                        <dd><a href="../../../../v0.12.0/index.html">v0.12.0</a></dd>
                        <dd><a href="../../../../v0.13.0/index.html">v0.13.0</a></dd>
                        <dd><a href="../../../../v0.14.0/index.html">v0.14.0</a></dd>
                        <dd><a href="../../../../v0.14.1/index.html">v0.14.1</a></dd>
                </dl>
                <dl>
                    <dt>Branches</dt>
                        <dd><a href="../../../py313/index.html">dev/py313</a></dd>
                        <dd><a href="../../../../HEAD/index.html">HEAD</a></dd>
                        <dd><a href="attachment.html">dev/attachments</a></dd>
                        <dd><a href="../../../pt/index.html">dev/pt</a></dd>
                        <dd><a href="../../../../main/index.html">main</a></dd>
                </dl>
        </div>
    </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>