

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>imgutils.sd.metadata &mdash; imgutils 0.2.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="imgutils.segment" href="../segment/index.html" />
    <link rel="prev" title="imgutils.sd" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> imgutils
          

          
          </a>

          
            
            
              <div class="version">
                0.2.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/quick_start/index.html">Quick Start</a></li>
</ul>
<p><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../information/environment.result.html">Run Environment Information</a></li>
</ul>
<p><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">imgutils.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ascii/index.html">imgutils.ascii</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">imgutils.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detect/index.html">imgutils.detect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../edge/index.html">imgutils.edge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">imgutils.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocr/index.html">imgutils.ocr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operate/index.html">imgutils.operate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restore/index.html">imgutils.restore</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">imgutils.sd</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">imgutils.sd.metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sdmetadata">SDMetaData</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parse-sdmeta-from-text">parse_sdmeta_from_text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-sdmeta-from-image">get_sdmeta_from_image</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../segment/index.html">imgutils.segment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tagging/index.html">imgutils.tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">imgutils.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validate/index.html">imgutils.validate</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">imgutils</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">imgutils.sd</a> &raquo;</li>
        
      <li>imgutils.sd.metadata</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api_doc/sd/metadata.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
    
    
  <section id="module-imgutils.sd.metadata">
<span id="imgutils-sd-metadata"></span><h1>imgutils.sd.metadata<a class="headerlink" href="#module-imgutils.sd.metadata" title="Permalink to this headline">¶</a></h1>
<dl>
<dt>Overview:</dt><dd><p>Metadata parser and formatter for a1111’s webui generated images.</p>
<p>Here are 2 sample images: <a class="reference download internal" download="" href="../../_downloads/d1acc9bfb297591c1047242d801bfcbd/sd_metadata_simple.png"><code class="xref download docutils literal notranslate"><span class="pre">sd_metadata_simple.png</span></code></a>
and <a class="reference download internal" download="" href="../../_downloads/2799bdff74fab5a61e0c4ed408f03484/sd_metadata_complex.png"><code class="xref download docutils literal notranslate"><span class="pre">sd_metadata_complex.png</span></code></a>.</p>
</dd>
</dl>
<section id="sdmetadata">
<h2>SDMetaData<a class="headerlink" href="#sdmetadata" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="imgutils.sd.metadata.SDMetaData">
<em class="property">class </em><code class="sig-prename descclassname">imgutils.sd.metadata.</code><code class="sig-name descname">SDMetaData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prompt</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">neg_prompt</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">parameters</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/imgutils/sd/metadata.html#SDMetaData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#imgutils.sd.metadata.SDMetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Store information parsed from the metadata of a PNG image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> (<em>str</em>) – The main prompt text.</p></li>
<li><p><strong>neg_prompt</strong> (<em>str</em>) – The negative prompt text.</p></li>
<li><p><strong>parameters</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – A dictionary containing various parameters.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="imgutils.sd.metadata.SDMetaData.__str__">
<code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/imgutils/sd/metadata.html#SDMetaData.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#imgutils.sd.metadata.SDMetaData.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a string representation of the metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string representation of the metadata.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">imgutils.sd</span> <span class="kn">import</span> <span class="n">get_sdmeta_from_image</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd1</span> <span class="o">=</span> <span class="n">get_sdmeta_from_image</span><span class="p">(</span><span class="s1">&#39;sd_metadata_simple.png&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sd1</span><span class="p">)</span>
<span class="go">(extremely delicate and beautiful), best quality, official art, global illumination, soft shadow, super detailed, Japanese light novel cover, 4K, metal_texture, (striped_background), super detailed background, more detailed, rich detailed, extremely detailed CG unity 8k wallpaper, ((unreal)), sci-fi,(fantasy),(masterpiece),(super delicate), (illustration), (extremely delicate and beautiful), anime coloring,</span>
<span class="go">(silver_skin), ((high-cut silver_impossible_bodysuit), ((gem_on_chest)),(high-cut_silver_mechanical_leotard)),headgear,</span>
<span class="go">(focus-on:1.1),(1_girl),((solo)),slim_waist,white hair, long hair, luminous yellow eyes,(medium_breast:1.2), (Indistinct_cameltoe:0.9), (flat_crotch:1.1),(coquettish), (squint:1.4),(evil_smile :1.35),(dark_persona), [open mouth: 0.7], standing,[wet:0.7],</span>
<span class="go">slim_face, tall_girl,(mature),mature_face, (slim_figure), (slim_legs:1.1), (groin:1.1), ((bare_thighs)),</span>
<span class="go">Negative prompt: EasyNegative, sketch, duplicate, ugly, huge eyes, text, logo, monochrome, worst face, (bad and mutated hands:1.3), (worst quality:2.0), (low quality:2.0), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), ((2girl)), (deformed fingers:1.2), (long fingers:1.2),(bad-artist-anime), bad-artist, bad hand, blush, (lipstick),skindentation, tie, ((big_breast)), (nipple), thighhighs, pubic_hair, pussy, black and white,(3d), ((realistic)),blurry,nipple slip, (nipple), blush, head_out_of_frame,curvy,</span>
<span class="go">Steps: 20, Sampler: DDIM, CFG scale: 7, Seed: 3827064803, Size: 512x848, Model hash: eb49192009, Model: AniDosMix, Clip skip: 2</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="imgutils.sd.metadata.SDMetaData.pnginfo">
<em class="property">property </em><code class="sig-name descname">pnginfo</code><a class="headerlink" href="#imgutils.sd.metadata.SDMetaData.pnginfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a PngInfo object with the metadata.</p>
<p>This can be used when saving an image with custom metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A PngInfo object containing the metadata.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>PngInfo</p>
</dd>
</dl>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">imgutils.sd</span> <span class="kn">import</span> <span class="n">get_sdmeta_from_image</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get metadata</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd1</span> <span class="o">=</span> <span class="n">get_sdmeta_from_image</span><span class="p">(</span><span class="s1">&#39;sd_metadata_simple.png&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create an image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span> <span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># save this image with sd1&#39;s metadata</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;new_image.png&#39;</span><span class="p">,</span> <span class="n">pnginfo</span><span class="o">=</span><span class="n">sd1</span><span class="o">.</span><span class="n">pnginfo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># let&#39;s see what is in &#39;new_image.png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_sdmeta_from_image</span><span class="p">(</span><span class="s1">&#39;new_image.png&#39;</span><span class="p">)</span>
<span class="go">SDMetaData(prompt=&#39;(extremely delicate and beautiful), best quality, official art, global illumination, soft shadow, super detailed, Japanese light novel cover, 4K, metal_texture, (striped_background), super detailed background, more detailed, rich detailed, extremely detailed CG unity 8k wallpaper, ((unreal)), sci-fi,(fantasy),(masterpiece),(super delicate), (illustration), (extremely delicate and beautiful), anime coloring,\n(silver_skin), ((high-cut silver_impossible_bodysuit), ((gem_on_chest)),(high-cut_silver_mechanical_leotard)),headgear,\n(focus-on:1.1),(1_girl),((solo)),slim_waist,white hair, long hair, luminous yellow eyes,(medium_breast:1.2), (Indistinct_cameltoe:0.9), (flat_crotch:1.1),(coquettish), (squint:1.4),(evil_smile :1.35),(dark_persona), [open mouth: 0.7], standing,[wet:0.7],\nslim_face, tall_girl,(mature),mature_face, (slim_figure), (slim_legs:1.1), (groin:1.1), ((bare_thighs)),&#39;, neg_prompt=&#39;EasyNegative, sketch, duplicate, ugly, huge eyes, text, logo, monochrome, worst face, (bad and mutated hands:1.3), (worst quality:2.0), (low quality:2.0), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), ((2girl)), (deformed fingers:1.2), (long fingers:1.2),(bad-artist-anime), bad-artist, bad hand, blush, (lipstick),skindentation, tie, ((big_breast)), (nipple), thighhighs, pubic_hair, pussy, black and white,(3d), ((realistic)),blurry,nipple slip, (nipple), blush, head_out_of_frame,curvy,&#39;, parameters={&#39;Steps&#39;: 20, &#39;Sampler&#39;: &#39;DDIM&#39;, &#39;CFG scale&#39;: 7, &#39;Seed&#39;: 3827064803, &#39;Size&#39;: (512, 848), &#39;Model hash&#39;: &#39;eb49192009&#39;, &#39;Model&#39;: &#39;AniDosMix&#39;, &#39;Clip skip&#39;: 2})</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="parse-sdmeta-from-text">
<h2>parse_sdmeta_from_text<a class="headerlink" href="#parse-sdmeta-from-text" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="imgutils.sd.metadata.parse_sdmeta_from_text">
<code class="sig-prename descclassname">imgutils.sd.metadata.</code><code class="sig-name descname">parse_sdmeta_from_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#imgutils.sd.metadata.SDMetaData" title="imgutils.sd.metadata.SDMetaData">imgutils.sd.metadata.SDMetaData</a><a class="reference internal" href="../../_modules/imgutils/sd/metadata.html#parse_sdmeta_from_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#imgutils.sd.metadata.parse_sdmeta_from_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse metadata information from a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<em>str</em>) – The input string containing metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A SDMetaData object containing the parsed metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#imgutils.sd.metadata.SDMetaData" title="imgutils.sd.metadata.SDMetaData">SDMetaData</a></p>
</dd>
</dl>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">imgutils.sd</span> <span class="kn">import</span> <span class="n">parse_sdmeta_from_text</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd1</span> <span class="o">=</span> <span class="n">parse_sdmeta_from_text</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">(extremely delicate and beautiful), best quality, official art, global illumination, soft shadow, super detailed, Japanese light novel cover, 4K, metal_texture, (striped_background), super detailed background, more detailed, rich detailed, extremely detailed CG unity 8k wallpaper, ((unreal)), sci-fi,(fantasy),(masterpiece),(super delicate), (illustration), (extremely delicate and beautiful), anime coloring,</span>
<span class="gp">... </span><span class="s2">(silver_skin), ((high-cut silver_impossible_bodysuit), ((gem_on_chest)),(high-cut_silver_mechanical_leotard)),headgear,</span>
<span class="gp">... </span><span class="s2">(focus-on:1.1),(1_girl),((solo)),slim_waist,white hair, long hair, luminous yellow eyes,(medium_breast:1.2), (Indistinct_cameltoe:0.9), (flat_crotch:1.1),(coquettish), (squint:1.4),(evil_smile :1.35),(dark_persona), [open mouth: 0.7], standing,[wet:0.7],</span>
<span class="gp">... </span><span class="s2">slim_face, tall_girl,(mature),mature_face, (slim_figure), (slim_legs:1.1), (groin:1.1), ((bare_thighs)),</span>
<span class="gp">... </span><span class="s2">Negative prompt: EasyNegative, sketch, duplicate, ugly, huge eyes, text, logo, monochrome, worst face, (bad and mutated hands:1.3), (worst quality:2.0), (low quality:2.0), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), ((2girl)), (deformed fingers:1.2), (long fingers:1.2),(bad-artist-anime), bad-artist, bad hand, blush, (lipstick),skindentation, tie, ((big_breast)), (nipple), thighhighs, pubic_hair, pussy, black and white,(3d), ((realistic)),blurry,nipple slip, (nipple), blush, head_out_of_frame,curvy,</span>
<span class="gp">... </span><span class="s2">Steps: 20, Sampler: DDIM, CFG scale: 7, Seed: 3827064803, Size: 512x848, Model hash: eb49192009, Model: AniDosMix, Clip skip: 2</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd1</span>
<span class="go">SDMetaData(prompt=&#39;(extremely delicate and beautiful), best quality, official art, global illumination, soft shadow, super detailed, Japanese light novel cover, 4K, metal_texture, (striped_background), super detailed background, more detailed, rich detailed, extremely detailed CG unity 8k wallpaper, ((unreal)), sci-fi,(fantasy),(masterpiece),(super delicate), (illustration), (extremely delicate and beautiful), anime coloring,\n(silver_skin), ((high-cut silver_impossible_bodysuit), ((gem_on_chest)),(high-cut_silver_mechanical_leotard)),headgear,\n(focus-on:1.1),(1_girl),((solo)),slim_waist,white hair, long hair, luminous yellow eyes,(medium_breast:1.2), (Indistinct_cameltoe:0.9), (flat_crotch:1.1),(coquettish), (squint:1.4),(evil_smile :1.35),(dark_persona), [open mouth: 0.7], standing,[wet:0.7],\nslim_face, tall_girl,(mature),mature_face, (slim_figure), (slim_legs:1.1), (groin:1.1), ((bare_thighs)),&#39;, neg_prompt=&#39;EasyNegative, sketch, duplicate, ugly, huge eyes, text, logo, monochrome, worst face, (bad and mutated hands:1.3), (worst quality:2.0), (low quality:2.0), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), ((2girl)), (deformed fingers:1.2), (long fingers:1.2),(bad-artist-anime), bad-artist, bad hand, blush, (lipstick),skindentation, tie, ((big_breast)), (nipple), thighhighs, pubic_hair, pussy, black and white,(3d), ((realistic)),blurry,nipple slip, (nipple), blush, head_out_of_frame,curvy,&#39;, parameters={&#39;Steps&#39;: 20, &#39;Sampler&#39;: &#39;DDIM&#39;, &#39;CFG scale&#39;: 7, &#39;Seed&#39;: 3827064803, &#39;Size&#39;: (512, 848), &#39;Model hash&#39;: &#39;eb49192009&#39;, &#39;Model&#39;: &#39;AniDosMix&#39;, &#39;Clip skip&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">sd1</span><span class="p">)</span>
<span class="go">&lt;class &#39;imgutils.sd.metadata.SDMetaData&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd2</span> <span class="o">=</span> <span class="n">parse_sdmeta_from_text</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">1girl, solo, blue eyes, black footwear, white hair, looking at viewer, shoes, full body, standing, bangs, indoors, wide sleeves, ahoge, dress, closed mouth, blush, long sleeves, potted plant, bag, plant, hair bun, window,&lt;lora:BlueArchive10:1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1&gt;,BlueArchive,</span>
<span class="gp">... </span><span class="s2">Negative prompt: Neg1,Negative,</span>
<span class="gp">... </span><span class="s2">Steps: 20, Sampler: DPM++ 2M SDE Karras, CFG scale: 7, Seed: 2647703743, Size: 768x768, Model hash: 72bd94132e, Model: CuteMix, Denoising strength: 0.7, ControlNet 0: &quot;preprocessor: openpose, model: control_v11p_sd15_openpose [cab727d4], weight: 1, starting/ending: (0, 1), resize mode: Crop and Resize, pixel perfect: False, control mode: Balanced, preprocessor params: (512, 64, 64)&quot;, Hires upscale: 2, Hires upscaler: Latent, TI hashes: &quot;Neg1: 339cc9210f70, Negative: 66a7279a88dd&quot;, Version: v1.5.1</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd2</span>
<span class="go">SDMetaData(prompt=&#39;1girl, solo, blue eyes, black footwear, white hair, looking at viewer, shoes, full body, standing, bangs, indoors, wide sleeves, ahoge, dress, closed mouth, blush, long sleeves, potted plant, bag, plant, hair bun, window,&lt;lora:BlueArchive10:1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1&gt;,BlueArchive,&#39;, neg_prompt=&#39;Neg1,Negative,&#39;, parameters={&#39;Steps&#39;: 20, &#39;Sampler&#39;: &#39;DPM++ 2M SDE Karras&#39;, &#39;CFG scale&#39;: 7, &#39;Seed&#39;: 2647703743, &#39;Size&#39;: (768, 768), &#39;Model hash&#39;: &#39;72bd94132e&#39;, &#39;Model&#39;: &#39;CuteMix&#39;, &#39;Denoising strength&#39;: 0.7, &#39;ControlNet 0&#39;: &#39;preprocessor: openpose, model: control_v11p_sd15_openpose [cab727d4], weight: 1, starting/ending: (0, 1), resize mode: Crop and Resize, pixel perfect: False, control mode: Balanced, preprocessor params: (512, 64, 64)&#39;, &#39;Hires upscale&#39;: 2, &#39;Hires upscaler&#39;: &#39;Latent&#39;, &#39;TI hashes&#39;: &#39;Neg1: 339cc9210f70, Negative: 66a7279a88dd&#39;, &#39;Version&#39;: &#39;v1.5.1&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">sd2</span><span class="p">)</span>
<span class="go">&lt;class &#39;imgutils.sd.metadata.SDMetaData&#39;&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-sdmeta-from-image">
<h2>get_sdmeta_from_image<a class="headerlink" href="#get-sdmeta-from-image" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="imgutils.sd.metadata.get_sdmeta_from_image">
<code class="sig-prename descclassname">imgutils.sd.metadata.</code><code class="sig-name descname">get_sdmeta_from_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>os.PathLike<span class="p">, </span>bytes<span class="p">, </span>bytearray<span class="p">, </span>BinaryIO<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#imgutils.sd.metadata.SDMetaData" title="imgutils.sd.metadata.SDMetaData">imgutils.sd.metadata.SDMetaData</a><span class="p">]</span><a class="reference internal" href="../../_modules/imgutils/sd/metadata.html#get_sdmeta_from_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#imgutils.sd.metadata.get_sdmeta_from_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metadata from a PNG image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>image</strong> (<em>ImageTyping</em>) – The input image.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A SDMetaData object containing the metadata if available, else None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#imgutils.sd.metadata.SDMetaData" title="imgutils.sd.metadata.SDMetaData">SDMetaData</a>]</p>
</dd>
</dl>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">imgutils.sd</span> <span class="kn">import</span> <span class="n">get_sdmeta_from_image</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd1</span> <span class="o">=</span> <span class="n">get_sdmeta_from_image</span><span class="p">(</span><span class="s1">&#39;sd_metadata_simple.png&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd1</span>
<span class="go">SDMetaData(prompt=&#39;(extremely delicate and beautiful), best quality, official art, global illumination, soft shadow, super detailed, Japanese light novel cover, 4K, metal_texture, (striped_background), super detailed background, more detailed, rich detailed, extremely detailed CG unity 8k wallpaper, ((unreal)), sci-fi,(fantasy),(masterpiece),(super delicate), (illustration), (extremely delicate and beautiful), anime coloring,\n(silver_skin), ((high-cut silver_impossible_bodysuit), ((gem_on_chest)),(high-cut_silver_mechanical_leotard)),headgear,\n(focus-on:1.1),(1_girl),((solo)),slim_waist,white hair, long hair, luminous yellow eyes,(medium_breast:1.2), (Indistinct_cameltoe:0.9), (flat_crotch:1.1),(coquettish), (squint:1.4),(evil_smile :1.35),(dark_persona), [open mouth: 0.7], standing,[wet:0.7],\nslim_face, tall_girl,(mature),mature_face, (slim_figure), (slim_legs:1.1), (groin:1.1), ((bare_thighs)),&#39;, neg_prompt=&#39;EasyNegative, sketch, duplicate, ugly, huge eyes, text, logo, monochrome, worst face, (bad and mutated hands:1.3), (worst quality:2.0), (low quality:2.0), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), ((2girl)), (deformed fingers:1.2), (long fingers:1.2),(bad-artist-anime), bad-artist, bad hand, blush, (lipstick),skindentation, tie, ((big_breast)), (nipple), thighhighs, pubic_hair, pussy, black and white,(3d), ((realistic)),blurry,nipple slip, (nipple), blush, head_out_of_frame,curvy,&#39;, parameters={&#39;Steps&#39;: 20, &#39;Sampler&#39;: &#39;DDIM&#39;, &#39;CFG scale&#39;: 7, &#39;Seed&#39;: 3827064803, &#39;Size&#39;: (512, 848), &#39;Model hash&#39;: &#39;eb49192009&#39;, &#39;Model&#39;: &#39;AniDosMix&#39;, &#39;Clip skip&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">sd1</span><span class="p">)</span>
<span class="go">&lt;class &#39;imgutils.sd.metadata.SDMetaData&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd2</span> <span class="o">=</span> <span class="n">get_sdmeta_from_image</span><span class="p">(</span><span class="s1">&#39;sd_metadata_complex.png&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sd2</span>
<span class="go">SDMetaData(prompt=&#39;1girl, solo, blue eyes, black footwear, white hair, looking at viewer, shoes, full body, standing, bangs, indoors, wide sleeves, ahoge, dress, closed mouth, blush, long sleeves, potted plant, bag, plant, hair bun, window,&lt;lora:BlueArchive10:1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1&gt;,BlueArchive,&#39;, neg_prompt=&#39;Neg1,Negative,&#39;, parameters={&#39;Steps&#39;: 20, &#39;Sampler&#39;: &#39;DPM++ 2M SDE Karras&#39;, &#39;CFG scale&#39;: 7, &#39;Seed&#39;: 2647703743, &#39;Size&#39;: (768, 768), &#39;Model hash&#39;: &#39;72bd94132e&#39;, &#39;Model&#39;: &#39;CuteMix&#39;, &#39;Denoising strength&#39;: 0.7, &#39;ControlNet 0&#39;: &#39;preprocessor: openpose, model: control_v11p_sd15_openpose [cab727d4], weight: 1, starting/ending: (0, 1), resize mode: Crop and Resize, pixel perfect: False, control mode: Balanced, preprocessor params: (512, 64, 64)&#39;, &#39;Hires upscale&#39;: 2, &#39;Hires upscaler&#39;: &#39;Latent&#39;, &#39;TI hashes&#39;: &#39;Neg1: 339cc9210f70, Negative: 66a7279a88dd&#39;, &#39;Version&#39;: &#39;v1.5.1&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">sd2</span><span class="p">)</span>
<span class="go">&lt;class &#39;imgutils.sd.metadata.SDMetaData&#39;&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
</section>



           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../segment/index.html" class="btn btn-neutral float-right" title="imgutils.segment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="imgutils.sd" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, narugo1992, 7eu7d7

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: dev/py312
    <span class="fa fa-caret-down"></span>
  </span>
        <div class="rst-other-versions">
                <dl>
                    <dt>Tags</dt>
                        <dd><a href="../../../../v0.1.0/index.html">v0.1.0</a></dd>
                        <dd><a href="../../../../v0.1.1/index.html">v0.1.1</a></dd>
                        <dd><a href="../../../../v0.2.0/index.html">v0.2.0</a></dd>
                        <dd><a href="../../../../v0.2.1/index.html">v0.2.1</a></dd>
                        <dd><a href="../../../../v0.2.10/api_doc/sd/metadata.html">v0.2.10</a></dd>
                        <dd><a href="../../../../v0.2.2/index.html">v0.2.2</a></dd>
                        <dd><a href="../../../../v0.2.3/index.html">v0.2.3</a></dd>
                        <dd><a href="../../../../v0.2.4/index.html">v0.2.4</a></dd>
                        <dd><a href="../../../../v0.2.5/index.html">v0.2.5</a></dd>
                        <dd><a href="../../../../v0.2.6/index.html">v0.2.6</a></dd>
                        <dd><a href="../../../../v0.2.7/index.html">v0.2.7</a></dd>
                        <dd><a href="../../../../v0.2.8/index.html">v0.2.8</a></dd>
                        <dd><a href="../../../../v0.2.9/index.html">v0.2.9</a></dd>
                        <dd><a href="../../../../v0.3.0/api_doc/sd/metadata.html">v0.3.0</a></dd>
                </dl>
                <dl>
                    <dt>Branches</dt>
                        <dd><a href="../../../ages/api_doc/sd/metadata.html">dev/ages</a></dd>
                        <dd><a href="../../../../ccip/index.html">ccip</a></dd>
                        <dd><a href="../../../bangumi/api_doc/sd/metadata.html">dev/bangumi</a></dd>
                        <dd><a href="../../../cdc/index.html">dev/cdc</a></dd>
                        <dd><a href="metadata.html">dev/py312</a></dd>
                        <dd><a href="../../../resolution/index.html">dev/resolution</a></dd>
                        <dd><a href="../../../tagprune/api_doc/sd/metadata.html">dev/tagprune</a></dd>
                        <dd><a href="../../../waifu2x/index.html">dev/waifu2x</a></dd>
                        <dd><a href="../../../../main/api_doc/sd/metadata.html">main</a></dd>
                </dl>
        </div>
    </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>